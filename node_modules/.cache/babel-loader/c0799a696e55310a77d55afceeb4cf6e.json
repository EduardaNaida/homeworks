{"ast":null,"code":"import _objectSpread from\"/Users/eduardanaida/Documents/GitHub/homeworks/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/eduardanaida/Documents/GitHub/homeworks/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import s2 from'../../s1-main/App.module.css';import s from'./HW14.module.css';import axios from'axios';import SuperDebouncedInput from'./common/c8-SuperDebouncedInput/SuperDebouncedInput';import{useSearchParams}from'react-router-dom';/*\n* 1 - дописать функцию onChangeTextCallback в SuperDebouncedInput\n* 2 - дописать функцию sendQuery в HW14\n* 3 - дописать функцию onChangeText в HW14\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW14 в HW5/pages/JuniorPlus\n* */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getTechs=function getTechs(find){return axios.get('https://incubator-personal-page-back.herokuapp.com/api/3.0/homework/test2',{params:{find:find}}).catch(function(e){var _e$response,_e$response$data;alert(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.errorText)||e.message);});};var HW14=function HW14(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),find=_useState2[0],setFind=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),techs=_useState6[0],setTechs=_useState6[1];var sendQuery=function sendQuery(value){setLoading(true);getTechs(value).then(function(res){if(res){setTechs(res.data.techs);setLoading(false);}});};var onChangeText=function onChangeText(value){setFind(value);if(!value.length){searchParams.delete('find');setSearchParams(searchParams);}else{setSearchParams(_objectSpread(_objectSpread({},Object.fromEntries(searchParams)),{},{find:value}));}};useEffect(function(){var params=Object.fromEntries(searchParams);sendQuery(params.find||'');setFind(params.find||'');},[]);var mappedTechs=techs.map(function(t){return/*#__PURE__*/_jsx(\"div\",{id:'hw14-tech-'+t,className:s.tech,children:t},t);});return/*#__PURE__*/_jsxs(\"div\",{id:'hw14',children:[/*#__PURE__*/_jsx(\"div\",{className:s2.hwTitle,children:\"Homework #14\"}),/*#__PURE__*/_jsxs(\"div\",{className:s2.hw,children:[/*#__PURE__*/_jsx(SuperDebouncedInput,{id:'hw14-super-debounced-input',value:find,onChangeText:onChangeText,onDebouncedChange:sendQuery}),/*#__PURE__*/_jsx(\"div\",{id:'hw14-loading',className:s.loading,children:isLoading?'...ищем':/*#__PURE__*/_jsx(\"br\",{})}),mappedTechs]})]});};export default HW14;","map":{"version":3,"names":["React","useEffect","useState","s2","s","axios","SuperDebouncedInput","useSearchParams","getTechs","find","get","params","catch","e","alert","response","data","errorText","message","HW14","setFind","isLoading","setLoading","searchParams","setSearchParams","techs","setTechs","sendQuery","value","then","res","onChangeText","length","delete","Object","fromEntries","mappedTechs","map","t","tech","hwTitle","hw","loading"],"sources":["/Users/eduardanaida/Documents/GitHub/homeworks/src/s2-homeworks/hw14/HW14.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport s2 from '../../s1-main/App.module.css'\nimport s from './HW14.module.css'\nimport axios from 'axios'\nimport SuperDebouncedInput from './common/c8-SuperDebouncedInput/SuperDebouncedInput'\nimport {useSearchParams} from 'react-router-dom'\n\n/*\n* 1 - дописать функцию onChangeTextCallback в SuperDebouncedInput\n* 2 - дописать функцию sendQuery в HW14\n* 3 - дописать функцию onChangeText в HW14\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW14 в HW5/pages/JuniorPlus\n* */\n\nconst getTechs = (find: string) => {\n    return axios\n        .get<{ techs: string[] }>(\n            'https://incubator-personal-page-back.herokuapp.com/api/3.0/homework/test2',\n            {params: {find}}\n        )\n        .catch((e) => {\n            alert(e.response?.data?.errorText || e.message)\n        })\n}\n\nconst HW14 = () => {\n    const [find, setFind] = useState('')\n    const [isLoading, setLoading] = useState(false)\n    const [searchParams, setSearchParams] = useSearchParams()\n    const [techs, setTechs] = useState<string[]>([])\n\n    const sendQuery = (value: string) => {\n        setLoading(true)\n        getTechs(value)\n            .then((res) => {\n                if (res) {\n                    setTechs(res.data.techs)\n                    setLoading(false)\n                }\n            })\n    }\n\n    const onChangeText = (value: string) => {\n        setFind(value)\n\n        if (!value.length) {\n            searchParams.delete('find')\n            setSearchParams(searchParams)\n        } else {\n            setSearchParams({\n                ...Object.fromEntries(searchParams),\n                find: value\n            })\n        }\n    }\n\n    useEffect(() => {\n        const params = Object.fromEntries(searchParams)\n\n        sendQuery(params.find || '')\n        setFind(params.find || '')\n    }, [])\n\n    const mappedTechs = techs.map(t => (\n        <div key={t} id={'hw14-tech-' + t} className={s.tech}>\n            {t}\n        </div>\n    ))\n\n    return (\n        <div id={'hw14'}>\n            <div className={s2.hwTitle}>Homework #14</div>\n\n            <div className={s2.hw}>\n                <SuperDebouncedInput\n                    id={'hw14-super-debounced-input'}\n                    value={find}\n                    onChangeText={onChangeText}\n                    onDebouncedChange={sendQuery}\n                />\n\n                <div id={'hw14-loading'} className={s.loading}>\n                    {isLoading ? '...ищем' : <br/>}\n                </div>\n\n                {mappedTechs}\n            </div>\n        </div>\n    )\n}\n\nexport default HW14\n"],"mappings":"uQAAA,MAAOA,MAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,MAAOC,GAAE,KAAM,8BAA8B,CAC7C,MAAOC,EAAC,KAAM,mBAAmB,CACjC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,oBAAmB,KAAM,qDAAqD,CACrF,OAAQC,eAAe,KAAO,kBAAkB,CAEhD;AACA;AACA;AACA;AACA;AACA;AACA,IANA,wFAQA,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,IAAY,CAAK,CAC/B,MAAOJ,MAAK,CACPK,GAAG,CACA,2EAA2E,CAC3E,CAACC,MAAM,CAAE,CAACF,IAAI,CAAJA,IAAI,CAAC,CAAC,CACnB,CACAG,KAAK,CAAC,SAACC,CAAC,CAAK,kCACVC,KAAK,CAAC,cAAAD,CAAC,CAACE,QAAQ,wDAAV,YAAYC,IAAI,2CAAhB,iBAAkBC,SAAS,GAAIJ,CAAC,CAACK,OAAO,CAAC,CACnD,CAAC,CAAC,CACV,CAAC,CAED,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACf,cAAwBjB,QAAQ,CAAC,EAAE,CAAC,wCAA7BO,IAAI,eAAEW,OAAO,eACpB,eAAgClB,QAAQ,CAAC,KAAK,CAAC,yCAAxCmB,SAAS,eAAEC,UAAU,eAC5B,qBAAwCf,eAAe,EAAE,sDAAlDgB,YAAY,sBAAEC,eAAe,sBACpC,eAA0BtB,QAAQ,CAAW,EAAE,CAAC,yCAAzCuB,KAAK,eAAEC,QAAQ,eAEtB,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAIC,KAAa,CAAK,CACjCN,UAAU,CAAC,IAAI,CAAC,CAChBd,QAAQ,CAACoB,KAAK,CAAC,CACVC,IAAI,CAAC,SAACC,GAAG,CAAK,CACX,GAAIA,GAAG,CAAE,CACLJ,QAAQ,CAACI,GAAG,CAACd,IAAI,CAACS,KAAK,CAAC,CACxBH,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAAC,CACV,CAAC,CAED,GAAMS,aAAY,CAAG,QAAfA,aAAY,CAAIH,KAAa,CAAK,CACpCR,OAAO,CAACQ,KAAK,CAAC,CAEd,GAAI,CAACA,KAAK,CAACI,MAAM,CAAE,CACfT,YAAY,CAACU,MAAM,CAAC,MAAM,CAAC,CAC3BT,eAAe,CAACD,YAAY,CAAC,CACjC,CAAC,IAAM,CACHC,eAAe,gCACRU,MAAM,CAACC,WAAW,CAACZ,YAAY,CAAC,MACnCd,IAAI,CAAEmB,KAAK,GACb,CACN,CACJ,CAAC,CAED3B,SAAS,CAAC,UAAM,CACZ,GAAMU,OAAM,CAAGuB,MAAM,CAACC,WAAW,CAACZ,YAAY,CAAC,CAE/CI,SAAS,CAAChB,MAAM,CAACF,IAAI,EAAI,EAAE,CAAC,CAC5BW,OAAO,CAACT,MAAM,CAACF,IAAI,EAAI,EAAE,CAAC,CAC9B,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM2B,YAAW,CAAGX,KAAK,CAACY,GAAG,CAAC,SAAAC,CAAC,qBAC3B,YAAa,EAAE,CAAE,YAAY,CAAGA,CAAE,CAAC,SAAS,CAAElC,CAAC,CAACmC,IAAK,UAChDD,CAAC,EADIA,CAAC,CAEL,EACT,CAAC,CAEF,mBACI,aAAK,EAAE,CAAE,MAAO,wBACZ,YAAK,SAAS,CAAEnC,EAAE,CAACqC,OAAQ,0BAAmB,cAE9C,aAAK,SAAS,CAAErC,EAAE,CAACsC,EAAG,wBAClB,KAAC,mBAAmB,EAChB,EAAE,CAAE,4BAA6B,CACjC,KAAK,CAAEhC,IAAK,CACZ,YAAY,CAAEsB,YAAa,CAC3B,iBAAiB,CAAEJ,SAAU,EAC/B,cAEF,YAAK,EAAE,CAAE,cAAe,CAAC,SAAS,CAAEvB,CAAC,CAACsC,OAAQ,UACzCrB,SAAS,CAAG,SAAS,cAAG,aAAK,EAC5B,CAELe,WAAW,GACV,GACJ,CAEd,CAAC,CAED,cAAejB,KAAI"},"metadata":{},"sourceType":"module"}